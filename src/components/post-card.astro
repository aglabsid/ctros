---
import type { CollectionEntry } from 'astro:content'
import { ChevronRight } from 'lucide-react'

interface Props {
	post: CollectionEntry<'post'>
}

const { post } = Astro.props
const { title, thumbnail, summary, tags, createdAt } = post.data

const formattedDate = new Date(createdAt).toLocaleDateString('en-US', {
	year: 'numeric',
	month: 'short',
	day: 'numeric',
})
---

<article class="group border">
	<div class="relative flex h-40 flex-col justify-center overflow-hidden">
		<img
			src={thumbnail.src}
			alt={`Thumbnail for article ${title}`}
			class="h-full w-full object-cover transition-transform group-hover:scale-105"
		/>
		<time
			datetime={createdAt.toISOString()}
			class="absolute bottom-0 z-10 bg-background/50 px-2 py-1 text-sm backdrop-blur-sm"
		>
			{formattedDate}
		</time>
		<div class="absolute top-0 right-0 z-10 m-1 flex gap-1">
			{
				tags.map((tag) => (
					<span class="bg-background/50 px-2 py-1 text-xs backdrop-blur-sm">
						{tag}
					</span>
				))
			}
		</div>
		<a
			href={`/blog/${post.id}`}
			aria-label={`View details of post: ${title}`}
			class="absolute flex h-full w-full items-center justify-center gap-2 opacity-0 transition-opacity group-hover:bg-background/75 group-hover:opacity-100 group-hover:backdrop-blur-sm focus:bg-background/75 focus:opacity-100 focus:backdrop-blur-sm"
		>
			<span>Continue reading</span>
			<ChevronRight className="size-4" />
		</a>
	</div>
	<div class="space-y-1 px-3 py-2 transition-colors group-hover:bg-muted/50">
		<h3 class="text-xl font-bold">{title}</h3>
		<p class="text-muted-foreground">{summary}</p>
	</div>
</article>

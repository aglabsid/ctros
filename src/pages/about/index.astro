---
import { getEntry } from 'astro:content'
import RootLayout from '@/layouts/root-layout.astro'

const about = await getEntry('about', 'main')

if (!about) {
	return Astro.redirect('/404')
}

const { avatar, name, username, description, skills, social } = about.data
---

<RootLayout>
	<main class="mx-auto max-w-5xl border-x">
		<section class="border-b p-6">
			<div class="flex items-center gap-6 pr-6">
				<img
					src={avatar.src}
					alt={name}
					class="size-28 border-4 border-primary object-cover"
				/>
				<div class="space-y-1">
					<h1 class="text-4xl">{name}</h1>
					<p class="text-muted-foreground">@{username}</p>
				</div>
			</div>
		</section>

		<section class="space-y-2.5 border-b p-6">
			{description.map((paragraph) => <p class="text-lg">{paragraph}</p>)}
		</section>

		<section class="border-b">
			<div class="flex items-stretch border-b">
				<h2 class="px-6 py-3 text-2xl">Skills</h2>
				<div class="flex-1 border-l diagonal-lines"></div>
			</div>
			<div class="grid gap-6 p-6 md:grid-cols-2">
				{
					skills.map((skill) => (
						<div>
							<h3 class="mb-2 text-xl font-semibold">{skill.name}</h3>
							<ul class="flex flex-wrap gap-2">
								{skill.items.map((item) => (
									<li class="bg-muted px-2.5 py-1 text-sm">{item}</li>
								))}
							</ul>
						</div>
					))
				}
			</div>
		</section>

		<section>
			<div class="flex items-stretch border-b">
				<h2 class="px-6 py-3 text-2xl">Connect</h2>
				<div class="flex-1 border-l diagonal-lines"></div>
			</div>
			<div class="p-6">
				<p class="mb-4 text-muted-foreground">{social.description}</p>
				<ul class="flex flex-wrap gap-3">
					{
						social.links.map((link) => (
							<li>
								<a
									href={link.url}
									target="_blank"
									rel="noopener noreferrer"
									class="inline-block border px-4 py-2 transition-colors hover:bg-muted"
								>
									{link.name}
								</a>
							</li>
						))
					}
				</ul>
			</div>
		</section>
	</main>
</RootLayout>
